{% load static %}
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>–§–∏–ª—å–º—ã –û–Ω–ª–∞–π–Ω</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'films/style.css' %}">
</head>
<body>
    <header>
        <h1 id="animated-title">üé¨ –°–º–æ—Ç—Ä–µ—Ç—å —Ñ–∏–ª—å–º—ã –æ–Ω–ª–∞–π–Ω</h1>
    </header>

    <div class="filter">
        <label for="genre-select">–§–∏–ª—å—Ç—Ä –ø–æ –∂–∞–Ω—Ä—É:</label>
        <select id="genre-select">
            <option value="all">–í—Å–µ</option>
            <option value="–§–∞–Ω—Ç–∞—Å—Ç–∏–∫–∞">–§–∞–Ω—Ç–∞—Å—Ç–∏–∫–∞</option>
            <option value="–î—Ä–∞–º–∞">–î—Ä–∞–º–∞</option>
            <option value="–¢—Ä–∏–ª–ª–µ—Ä">–¢—Ä–∏–ª–ª–µ—Ä</option>
        </select>
    </div>

    <section class="movies">
        {% for movie in movies %}
        <div class="movie-card" data-genre="{{ movie.genre }}">
            <img src="{% static movie.poster %}" alt="{{ movie.title }}" class="movie-poster">
            <h2>{{ movie.title }}</h2>
            <p>{{ movie.description }}</p>
            <a href="{% url 'movie_detail' movie.id %}" class="watch-button">–°–º–æ—Ç—Ä–µ—Ç—å</a>
        </div>
        {% endfor %}
    </section>

    <!-- –°–∫—Ä–∏–ø—Ç –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ —Ñ–∏–ª—å–º–æ–≤ –ø–æ –∂–∞–Ω—Ä—É -->
    <script>
        document.getElementById('genre-select').addEventListener('change', function() {
            const genre = this.value;
            const cards = document.querySelectorAll('.movie-card');

            cards.forEach(card => {
                const cardGenre = card.getAttribute('data-genre');
                if (genre === 'all' || cardGenre === genre) {
                    card.style.display = 'flex';
                } else {
                    card.style.display = 'none';
                }
            });
        });
    </script>

    <!-- –°–∫—Ä–∏–ø—Ç –∞–Ω–∏–º–∞—Ü–∏–∏ –∑–∞–≥–æ–ª–æ–≤–∫–∞ —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –ø—Ä–æ–±–µ–ª–æ–≤ -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const title = document.getElementById('animated-title');
            const text = title.innerText;
            title.innerHTML = '';

            [...text].forEach((letter, index) => {
                const span = document.createElement('span');
                if (letter === ' ') {
                    span.innerHTML = '&nbsp;';
                } else {
                    span.textContent = letter;
                }
                span.style.opacity = 0;
                span.style.display = 'inline-block';
                span.style.transform = 'translateY(20px)';
                span.style.transition = `all 0.5s ease ${index * 0.05}s`;
                title.appendChild(span);
            });

            setTimeout(() => {
                document.querySelectorAll('#animated-title span').forEach(span => {
                    span.style.opacity = 1;
                    span.style.transform = 'translateY(0)';
                });
            }, 100);
        });
    </script>
</body>
</html>
